(self.webpackChunkazure_maps_storybook=self.webpackChunkazure_maps_storybook||[]).push([[322,164],{"./node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>useMDXComponents,x:()=>MDXProvider});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const emptyComponents={},MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext(emptyComponents);function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((function(){return"function"==typeof components?components(contextComponents):{...contextComponents,...components}}),[contextComponents,components])}function MDXProvider(properties){let allComponents;return allComponents=properties.disableParentContext?"function"==typeof properties.components?properties.components(emptyComponents):properties.components||emptyComponents:useMDXComponents(properties.components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},properties.children)}},"./src/stories/MapAnnotations/Popup/Interactive/InteractivePopup.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>MDXContent});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_home_runner_work_react_azure_maps_playground_react_azure_maps_playground_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs"),_InteractivePopup_stories__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/stories/MapAnnotations/Popup/Interactive/InteractivePopup.stories.ts"),_InteractivePopupExample__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/stories/MapAnnotations/Popup/Interactive/InteractivePopupExample.tsx");function _createMdxContent(props){const _components={h1:"h1",h2:"h2",h3:"h3",p:"p",strong:"strong",...(0,_home_runner_work_react_azure_maps_playground_react_azure_maps_playground_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_4__.R)(),...props.components};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_5__.W8,{of:_InteractivePopup_stories__WEBPACK_IMPORTED_MODULE_2__}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h1,{id:"interactive-popup",children:"Interactive Popup"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Besides the static popup, you can also create an interactive popup containing React components.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{}),"\nTherefore, you can easily change the states of the components both inside and outside the popup.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"example",children:"Example"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Here is an example of an interactive popup that shows a counter counting the number of times the user has clicked on the popup.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{}),"\nYou can also change the popup's color by clicking the button on the top left corner."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_InteractivePopupExample__WEBPACK_IMPORTED_MODULE_3__.A,{isVisible:!0,options:{position:[0,0]}}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Let's take a look of how the interactive popup is implemented.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"implementation",children:"Implementation"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h3,{id:"1-create-an-interactive-popup-component",children:"1. Create an interactive popup component"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Here we initialize a new Popup instance and render the React node children for the popup's content.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_5__.kL,{code:"\nimport { useContext, useEffect, useState, ReactNode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport atlas from 'azure-maps-control';\nimport { IAzureMapsContextProps, AzureMapsContext, IAzureMapPopupEvent } from 'react-azure-maps';\n\ninterface InteractivePopupProps {\n  children: ReactNode;\n  isVisible?: boolean;\n  options?: atlas.PopupOptions;\n  events?: IAzureMapPopupEvent[];\n}\n\nconst InteractivePopup = ({ children, isVisible = true, options, events }: InteractivePopupProps) => {\n  const { mapRef } = useContext<IAzureMapsContextProps>(AzureMapsContext);\n  const containerRef = document.createElement('div');\n  const root = createRoot(containerRef);\n  const [popupRef] = useState<atlas.Popup>(new atlas.Popup({ ...options, content: containerRef }));\n\n  // Add events to the popup when it is mounted\n  useEffect(() => {\n    if (mapRef) {\n      events &&\n        events.forEach(({ eventName, callback }) => {\n          mapRef.events.add(eventName, popupRef, callback);\n        });\n      return () => {\n        mapRef.popups.remove(popupRef);\n      };\n    }\n  }, []);\n\n  // Render the popup content and set the options\n  useEffect(() => {\n    root.render(children);\n    popupRef.setOptions({\n      ...options,\n      content: containerRef,\n    });\n    if (mapRef && isVisible && !popupRef.isOpen()) {\n      popupRef.open(mapRef);\n    }\n  }, [options, children]);\n\n  // Toggle the popup visibility\n  useEffect(() => {\n    if (mapRef) {\n      if (isVisible && !popupRef.isOpen()) {\n        popupRef.open(mapRef);\n      } else if (mapRef.popups.getPopups().length && !isVisible && popupRef.isOpen()) {\n        popupRef.close();\n      }\n    }\n  }, [isVisible]);\n\n  return null;\n};\n\nexport default InteractivePopup;\n\n"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h3,{id:"2-create-your-popup-content",children:"2. Create your popup content"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["In this example we create a simple counter component that increments the count when the user clicks on the popup.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{}),"\nAlso, it accepts a background color as a prop to change the popup's color.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.strong,{children:"You can create any kind of React component as the popup content."})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_5__.kL,{code:"\nimport { useState } from 'react';\n\nconst PopupContent = ({ bgColor }: { bgColor: string }) => {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div style={{ padding: '10px', backgroundColor: bgColor, textAlign: 'center' }}>\n      <h3>This is a counter:</h3>\n      <p>You have clicked {count} times.</p>\n      <button\n        style={{\n          border: '1px',\n          padding: '4px',\n          cursor: 'pointer',\n          backgroundColor: 'gainsboro',\n        }}\n        onClick={() => {\n          setCount(count + 1);\n        }}\n      >\n        Click me\n      </button>\n      <button\n        style={{\n          border: '1px',\n          padding: '4px',\n          cursor: 'pointer',\n          color: 'blue',\n          backgroundColor: 'transparent',\n        }}\n        onClick={() => {\n          setCount(0);\n        }}\n      >\n        Reset\n      </button>\n    </div>\n  );\n};\n\nexport default PopupContent;\n"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h3,{id:"3-use-the-interactive-popup",children:"3. Use the interactive popup"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Finally, you can use the interactive popup component on your map and pass your react component as children.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("br",{})]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_5__.kL,{code:"\nimport { AzureMap, AzureMapsProvider } from 'react-azure-maps';\nimport InteractivePopup from './InteractivePopup';\nimport PopupContent from './PopupContent';\nimport { useState } from 'react';\n\nconst YourMap = () => {\n  const [bgColor, setBgColor] = useState('white');\n\n  // click to change color randomly\n  const changeColor = () => {\n    const color = `#${Math.floor(Math.random() * 16777215).toString(16)}`;\n    setBgColor(color);\n  };\n  return (\n    <AzureMapsProvider>\n      <div>\n        <button onClick={changeColor} style={{ marginBottom: '10px' }}>\n          Change popup color\n        </button>\n        <div style={...}>\n          <AzureMap options={yourOptions}>\n            <InteractivePopup isVisible options={{ position: [0, 0] }}>\n              <PopupContent bgColor={bgColor} />\n            </InteractivePopup>\n          </AzureMap>\n        </div>\n      </div>\n    </AzureMapsProvider>\n  );\n};\n"})]})}function MDXContent(props={}){const{wrapper:MDXLayout}={...(0,_home_runner_work_react_azure_maps_playground_react_azure_maps_playground_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim_mjs__WEBPACK_IMPORTED_MODULE_4__.R)(),...props.components};return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MDXLayout,{...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_createMdxContent,{...props})}):_createMdxContent(props)}},"./node_modules/@storybook/core/dist/components sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@storybook/core/dist/components sync recursive",module.exports=webpackEmptyContext},"./node_modules/@storybook/core/dist/theming sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/@storybook/core/dist/theming sync recursive",module.exports=webpackEmptyContext},"./src/stories/MapAnnotations/Popup/Interactive/InteractivePopup.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Example:()=>Example,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={title:"Map Annotations/Interactive Popup",component:__webpack_require__("./src/stories/MapAnnotations/Popup/Interactive/InteractivePopupExample.tsx").A,args:{isVisible:!0,options:{position:[0,0]}},parameters:{storySource:{source:"\nimport { useContext, useEffect, useState, ReactNode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport atlas from 'azure-maps-control';\nimport { IAzureMapsContextProps, AzureMapsContext, IAzureMapPopupEvent } from 'react-azure-maps';\n\ninterface InteractivePopupProps {\n  children: ReactNode;\n  isVisible?: boolean;\n  options?: atlas.PopupOptions;\n  events?: IAzureMapPopupEvent[];\n};\n\nconst InteractivePopup = ({ children, isVisible = true, options, events }: InteractivePopupProps) => {\n  const { mapRef } = useContext<IAzureMapsContextProps>(AzureMapsContext);\n  const containerRef = document.createElement('div');\n  const root = createRoot(containerRef);\n  const [popupRef] = useState<atlas.Popup>(new atlas.Popup({ ...options, content: containerRef }));\n\n  // Add events to the popup when it is mounted\n  useEffect(() => {\n    if (mapRef) {\n      events &&\n        events.forEach(({ eventName, callback }) => {\n          mapRef.events.add(eventName, popupRef, callback);\n        });\n      return () => {\n        mapRef.popups.remove(popupRef);\n      };\n    }\n  }, []);\n\n  // Render the popup content and set the options\n  useEffect(() => {\n    root.render(children);\n    popupRef.setOptions({\n      ...options,\n      content: containerRef,\n    });\n    if (mapRef && isVisible && !popupRef.isOpen()) {\n      popupRef.open(mapRef);\n    }\n  }, [options, children]);\n\n  // Toggle the popup visibility\n  useEffect(() => {\n    if (mapRef) {\n      if (isVisible && !popupRef.isOpen()) {\n        popupRef.open(mapRef);\n      } else if (mapRef.popups.getPopups().length && !isVisible && popupRef.isOpen()) {\n        popupRef.close();\n      }\n    }\n  }, [isVisible]);\n\n  return null;\n};\n"}}},Example={},__namedExportsOrder=["Example"];Example.parameters={...Example.parameters,docs:{...Example.parameters?.docs,source:{originalSource:"{}",...Example.parameters?.docs?.source}}}},"./src/key.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{t:()=>mapOptions});const mapOptions={authOptions:{authType:__webpack_require__("./node_modules/react-azure-maps/dist/react-azure-maps.es5.js").h_.anonymous,clientId:"2a60774c-f588-423b-b004-56d213773ee6",getToken:(resolve,reject)=>{fetch("https://anonymous-auth.azurewebsites.net/api/GetAccessToken-Prod").then((result=>result.text())).then((result=>resolve(result))).catch((error=>reject(new Error("Failed to fetch anon auth token: ".concat(error.message)))))}},center:[0,0],view:"Auto"}},"./src/stories/MapAnnotations/Popup/Interactive/InteractivePopupExample.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Interactive_InteractivePopupExample});var react_azure_maps_es5=__webpack_require__("./node_modules/react-azure-maps/dist/react-azure-maps.es5.js"),key=__webpack_require__("./src/key.ts"),react=__webpack_require__("./node_modules/react/index.js"),client=__webpack_require__("./node_modules/react-dom/client.js"),atlas_esm_min=__webpack_require__("./node_modules/azure-maps-control/dist/atlas-esm.min.js");const Interactive_InteractivePopup=_ref=>{let{children,isVisible=!0,options,events}=_ref;const{mapRef}=(0,react.useContext)(react_azure_maps_es5.ON),containerRef=document.createElement("div"),root=(0,client.createRoot)(containerRef),[popupRef]=(0,react.useState)(new atlas_esm_min.Ay.Popup({...options,content:containerRef}));return(0,react.useEffect)((()=>{if(mapRef)return events&&events.forEach((_ref2=>{let{eventName,callback}=_ref2;mapRef.events.add(eventName,popupRef,callback)})),()=>{mapRef.popups.remove(popupRef)}}),[]),(0,react.useEffect)((()=>{root.render(children),popupRef.setOptions({...options,content:containerRef}),mapRef&&isVisible&&!popupRef.isOpen()&&popupRef.open(mapRef)}),[options,children]),(0,react.useEffect)((()=>{mapRef&&(isVisible&&!popupRef.isOpen()?popupRef.open(mapRef):mapRef.popups.getPopups().length&&!isVisible&&popupRef.isOpen()&&popupRef.close())}),[isVisible]),null};var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const PopupContent=_ref=>{let{bgColor}=_ref;const[count,setCount]=(0,react.useState)(0);return(0,jsx_runtime.jsxs)("div",{style:{padding:"10px",backgroundColor:bgColor,textAlign:"center"},children:[(0,jsx_runtime.jsx)("h3",{children:"This is a counter:"}),(0,jsx_runtime.jsxs)("p",{children:["You have clicked ",count," times."]}),(0,jsx_runtime.jsx)("button",{style:{border:"1px",padding:"4px",cursor:"pointer",backgroundColor:"gainsboro"},onClick:()=>{setCount(count+1)},children:"Click me"}),(0,jsx_runtime.jsx)("button",{style:{border:"1px",padding:"4px",cursor:"pointer",color:"blue",backgroundColor:"transparent"},onClick:()=>{setCount(0)},children:"Reset"})]})},Interactive_PopupContent=PopupContent;PopupContent.__docgenInfo={description:"",methods:[],displayName:"PopupContent",props:{bgColor:{required:!0,tsType:{name:"string"},description:""}}};const InteractivePopupExample=_ref=>{let{isVisible,options}=_ref;const[bgColor,setBgColor]=(0,react.useState)("white");return(0,jsx_runtime.jsx)(react_azure_maps_es5.oY,{children:(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("button",{onClick:()=>{const color="#".concat(Math.floor(16777215*Math.random()).toString(16));setBgColor(color)},style:{marginBottom:"10px"},children:"Change popup color"}),(0,jsx_runtime.jsx)("div",{className:"defaultMap sb-unstyled",children:(0,jsx_runtime.jsx)(react_azure_maps_es5._9,{options:key.t,children:(0,jsx_runtime.jsx)(Interactive_InteractivePopup,{isVisible,options,children:(0,jsx_runtime.jsx)(Interactive_PopupContent,{bgColor})})})})]})})},Interactive_InteractivePopupExample=InteractivePopupExample;InteractivePopupExample.__docgenInfo={description:"",methods:[],displayName:"InteractivePopupExample"}},"./node_modules/memoizerific sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="./node_modules/memoizerific sync recursive",module.exports=webpackEmptyContext}}]);